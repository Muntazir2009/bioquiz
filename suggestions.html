<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Suggestions â€¢ BioQuiz</title>

<link rel="stylesheet" href="css/suggestions.css">
</head>

<body>

<!-- STAR BACKGROUND -->
<canvas id="stars"></canvas>

<header class="top-header">
  <h1>Suggestions</h1>
  <p>Help us make BioQuiz even better ğŸš€</p>
</header>

<main class="suggestion-wrap">

  <form id="suggestionForm" class="suggestion-card">
  
    <label>
      Name (optional)
      <input type="text" name="name">
    </label>

    <label>
      Class / Grade (optional)
      <input type="text" name="grade">
    </label>

    <label>
      Type of Suggestion
      <select name="type">
        <option>Feature Request</option>
        <option>Bug Report</option>
        <option>Content Improvement</option>
        <option>Other</option>
      </select>
    </label>

    <label>
      Your Mood
      <div class="emoji-row">
        <span class="emoji">ğŸ˜</span>
        <span class="emoji">ğŸ™‚</span>
        <span class="emoji">ğŸ˜</span>
        <span class="emoji">ğŸ¤¯</span>
      </div>
      <input type="hidden" name="mood" id="mood">
    </label>

    <label>
      Your Suggestion
      <textarea name="suggestion" required></textarea>
    </label>

    <input type="hidden" name="device" id="device">

    <button type="submit">âœ¨ Submit Suggestion</button>
    <p class="note" id="message"></p>

  </form>

</main>

<script>
/* ===============================
   ğŸŒŸ STAR BACKGROUND
=============================== */
const canvas = document.getElementById("stars");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
window.addEventListener("resize", resize);

const stars = Array.from({ length: 140 }, () => ({
  x: Math.random() * innerWidth,
  y: Math.random() * innerHeight,
  r: Math.random() * 1.2,
  o: Math.random(),
  s: Math.random() * 0.2 + 0.05
}));

function animateStars(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  stars.forEach(star=>{
    star.y += star.s;
    if(star.y > canvas.height) star.y = 0;
    ctx.globalAlpha = star.o;
    ctx.beginPath();
    ctx.arc(star.x, star.y, star.r, 0, Math.PI*2);
    ctx.fillStyle = "#fff";
    ctx.fill();
  });
  requestAnimationFrame(animateStars);
}
animateStars();

/* ===============================
   ğŸ˜„ EMOJI SELECT
=============================== */
const emojis = document.querySelectorAll(".emoji");
const moodInput = document.getElementById("mood");

emojis.forEach(e=>{
  e.addEventListener("click", ()=>{
    emojis.forEach(x=>x.classList.remove("active"));
    e.classList.add("active");
    moodInput.value = e.textContent;
  });
});

/* ===============================
   ğŸ“± DEVICE INFO
=============================== */
document.getElementById("device").value =
  /Mobile|Android|iPhone/i.test(navigator.userAgent)
  ? "Mobile"
  : "Desktop";

/* ===============================
   ğŸ“¨ FORMSPREE SUBMIT (SMOOTH)
=============================== */
const form = document.getElementById("suggestionForm");
const msg = document.getElementById("message");

form.addEventListener("submit", e=>{
  e.preventDefault();

  msg.textContent = "Sending...";
  msg.style.color = "#6fb6ff";

  fetch("https://formspree.io/f/xqedearo", {
    method: "POST",
    body: new FormData(form),
    headers: { "Accept": "application/json" }
  })
  .then(res=>{
    if(res.ok){
      msg.textContent = "âœ¨ Thank you! Suggestion received.";
      msg.style.color = "#6dffcc";
      form.reset();
      emojis.forEach(e=>e.classList.remove("active"));
    }else{
      throw new Error();
    }
  })
  .catch(()=>{
    msg.textContent = "âš  Something went wrong. Try again.";
    msg.style.color = "#ff8a8a";
  });
});
</script>

</body>
</html>
